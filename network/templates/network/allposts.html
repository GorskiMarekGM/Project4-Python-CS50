{% extends "network/layout.html" %}
{% load static %}

{% block new_post %}

{% for post in page_obj %}
<div class="post" id="{{post.id}}">
    <div class="content">
        <h3>{{post.title}}</h3>
        <hr>
        
        <div id="text-before">
            <h5>{{post.text}}</h5>
        </div>

        <div class="edit" id="edit" style="display: none;">
            <form method=post action="{% url 'edit_post' post_id=post.id %}">
                {% csrf_token %}
                <textarea rows="10" class="form-control textarea-edit" name="textarea">{{post.content}}</textarea>          
                <br>
                <div class="modal-footer">
                    <button class="btn btn-dark" type="submit" value="Save"> Save</button>
                </div>
            </form>
        </div>

        <br>
        <div class="get-user">
            <h5 style="font-size: 15px;" onclick = "get_profile('{{post.author.id}}')">Created by: {{post.author}}</h5>
        </div>
        <div class="date">
            Date of creation: <br>
            {{post.creation_date}}
        </div> 
        {% if request.user == post.author %}
        <div class="likes" style="cursor: pointer; margin-left:10px;" onclick = "display_edit()">
            Edit Post
        </div>
        {% endif %}
    
        <div class="likes" >
            likes: {{post.likes}}
        </div>
    </div>
    
    
</div>
{% endfor %}

<div class="pagination">
    <span class="step-links">
        {% if page_obj.has_previous %}
            <a href="?page=1">&laquo; first</a>
            <a href="?page={{ page_obj.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
        </span>

        {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}">next</a>
            <a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
        {% endif %}
    </span>
</div>


<script>
    function display_edit(){
        document.getElementById('edit').style.display=""
        document.getElementById('text-before').style.display="none"
    }
</script>
{% endblock %}